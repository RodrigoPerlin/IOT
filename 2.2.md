# üß† Aula: IA e IoT ‚Äî Modelos Simples de ML e Integra√ß√µes com APIs Externas


## üß© 1. Introdu√ß√£o: IA + IoT

A **Internet das Coisas (IoT)** conecta dispositivos f√≠sicos ‚Äî como sensores, atuadores, c√¢meras e m√°quinas ‚Äî √† internet, permitindo **coleta e troca de dados em tempo real**.  
Esses dispositivos podem medir vari√°veis como temperatura, umidade, movimento, energia el√©trica e muito mais.

Por outro lado, a **Intelig√™ncia Artificial (IA)** √© o campo que busca **fazer m√°quinas aprenderem com dados** e tomarem decis√µes ou previs√µes sem depender totalmente de programa√ß√£o expl√≠cita.

Quando combinamos **IA + IoT**, obtemos sistemas inteligentes capazes de:
- **Analisar dados automaticamente**;
- **Detectar anomalias** (por exemplo, falhas em sensores ou comportamentos fora do padr√£o);
- **Prever eventos futuros** (como o aumento de temperatura ou consumo de energia);
- **Tomar decis√µes autom√°ticas** (como desligar um equipamento ao detectar risco).

---

### üå± Exemplo de aplica√ß√£o

Imagine uma **estufa agr√≠cola** equipada com sensores de temperatura e umidade.

| Componente | Fun√ß√£o |
|-------------|--------|
| Sensor de temperatura | Mede o calor ambiente |
| Sensor de umidade | Mede a umidade do ar e do solo |
| Atuador (bomba d‚Äô√°gua) | Liga/desliga irriga√ß√£o automaticamente |
| Servidor/IA | Analisa dados e toma decis√µes |

A IA, atrav√©s de **modelos simples de Machine Learning (ML)**, pode:
- **Prever** quando a temperatura tende a ultrapassar o limite ideal;  
- **Detectar anomalias** caso um sensor apresente leitura fora do padr√£o (indicando falha);  
- **Acionar atuadores automaticamente**, otimizando recursos e reduzindo desperd√≠cios.

---

### üí° Benef√≠cios da integra√ß√£o IA + IoT

- **Efici√™ncia energ√©tica:** sistemas s√≥ ligam quando necess√°rio.  
- **Preven√ß√£o de falhas:** a IA detecta anomalias antes que causem danos.  
- **Automa√ß√£o inteligente:** reduz a necessidade de interven√ß√£o humana.  
- **Tomada de decis√£o baseada em dados:** melhora o controle e previsibilidade.

---

### ‚öôÔ∏è Exemplo conceitual de fluxo de dados

[Sensores IoT] ‚Üí [Coleta de dados] ‚Üí [Modelo de IA]
‚Üì
[Previs√£o / Anomalia]
‚Üì
[A√ß√£o ou Notifica√ß√£o]


Esse fluxo √© a base de sistemas modernos de **automa√ß√£o inteligente** em √°reas como:
- Agricultura de precis√£o üåæ  
- Ind√∫stria 4.0 üè≠  
- Casas inteligentes üè†  
- Cidades inteligentes üåÜ  
- Sa√∫de conectada üè•  

---

üìò **Resumo da Se√ß√£o 1:**
> A uni√£o entre IA e IoT permite que dispositivos conectados se tornem realmente ‚Äúinteligentes‚Äù, analisando dados, aprendendo com o ambiente e agindo de forma aut√¥noma.

---

## ü§ñ 2. Modelos Simples de Machine Learning

### 2.1. Regress√£o Linear ‚Äî **Previs√£o de valores**
Usada para prever valores cont√≠nuos (ex.: temperatura).

```python
import numpy as np
from sklearn.linear_model import LinearRegression

# Dados simulados (horas do dia x temperatura)
X = np.array([[8], [10], [12], [14], [16]])  # entrada
y = np.array([20, 22, 25, 27, 26])           # sa√≠da

modelo = LinearRegression()
modelo.fit(X, y)

# Previs√£o para 18h
temp_prevista = modelo.predict([[18]])
print(f"Temperatura prevista √†s 18h: {temp_prevista[0]:.1f}¬∞C")
```

Explica√ß√£o:
O modelo aprende uma tend√™ncia linear entre hora e temperatura, prevendo novos valores com base em padr√µes anteriores.

## 2.2. Isolation Forest ‚Äî Detec√ß√£o de anomalias

Usada para identificar leituras fora do padr√£o (ex.: sensor com falha).
```
import numpy as np
from sklearn.ensemble import IsolationForest

# Leituras normais + uma an√¥mala
dados = np.array([[20], [21], [22], [21.5], [35]])  # 35 √© an√¥malo
modelo = IsolationForest(contamination=0.2)
modelo.fit(dados)

anomalias = modelo.predict(dados)
print(anomalias)  # -1 = an√¥malo, 1 = normal
```

Explica√ß√£o:
O modelo cria v√°rias ‚Äú√°rvores‚Äù para isolar pontos diferentes.
Se um ponto for isolado rapidamente (muito diferente dos demais), ele √© considerado an√¥malo.

## 2.3. K-Means ‚Äî Agrupamento e detec√ß√£o de padr√µes

O K-Means n√£o prev√™ valores, mas agrupa dados com comportamento parecido.
√â √∫til para descobrir padr√µes sem precisar de r√≥tulos.
```
import numpy as np
from sklearn.cluster import KMeans
import matplotlib.pyplot as plt

# Dados simulados (umidade e temperatura)
X = np.array([[20, 60], [21, 65], [30, 80], [31, 82], [25, 70]])

modelo = KMeans(n_clusters=2, random_state=42)
modelo.fit(X)
labels = modelo.labels_

plt.scatter(X[:, 0], X[:, 1], c=labels, cmap='coolwarm')
plt.xlabel('Temperatura (¬∞C)')
plt.ylabel('Umidade (%)')
plt.title('Agrupamento de sensores com K-Means')
plt.show()

print("Grupos identificados:", labels)
```

üß† Explica√ß√£o:

O K-Means tenta agrupar pontos em torno de centros (clusters).

Cada grupo representa um padr√£o de comportamento (por exemplo, zonas mais quentes e mais √∫midas).

üåç Aplica√ß√£o IoT:

Identificar zonas de microclima dentro de uma estufa.

Agrupar m√°quinas com comportamento similar para manuten√ß√£o.

Detectar padr√µes de uso em redes el√©tricas inteligentes.
# üåê 3. APIs e Servi√ßos Externos com IoT

IoT ganha poder real quando se conecta a servi√ßos externos ‚Äî avisando, automatizando ou registrando informa√ß√µes.

##  3.1. Enviando alertas via Telegram
```python
import requests

bot_token = "SEU_TOKEN_DO_BOT"
chat_id = "ID_DO_USUARIO"
mensagem = "‚ö†Ô∏è Temperatura acima do normal!"

url = f"https://api.telegram.org/bot{bot_token}/sendMessage"
requests.post(url, data={"chat_id": chat_id, "text": mensagem})
```

## Explica√ß√£o:
Quando o modelo detecta uma anomalia, o sistema envia uma mensagem autom√°tica ao Telegram.
Isso permite resposta em tempo real sem supervis√£o manual.

## 3.2. Enviando dados para o Google Sheets

Usando o servi√ßo Google Apps Script, voc√™ pode criar uma URL p√∫blica que recebe dados via POST.
```python

import requests

url = "https://script.google.com/macros/s/SEU_SCRIPT_ID/exec"
dados = {"sensor": "temp01", "valor": 26.5}
requests.post(url, data=dados)
```

Explica√ß√£o:
Os dados s√£o gravados diretamente em uma planilha online, funcionando como banco de dados leve para monitoramento.

## 3.3  Integra√ß√£o com WhatsApp (via Twilio)
```python

from twilio.rest import Client

sid = "SEU_SID"
token = "SEU_TOKEN"
client = Client(sid, token)

message = client.messages.create(
    from_="whatsapp:+14155238886",
    body="üå°Ô∏è Alerta: Temperatura fora do intervalo!",
    to="whatsapp:+5511999999999"
)
print(message.sid)
```

Explica√ß√£o:
Com o Twilio, √© poss√≠vel enviar mensagens autom√°ticas do IoT para o WhatsApp ‚Äî √∫til em monitoramento remoto.

# üß† 4. Quest√µes de Fixa√ß√£o

Qual a principal diferen√ßa entre previs√£o e detec√ß√£o de anomalias em ML?

Por que modelos simples (como Regress√£o Linear ou Isolation Forest) s√£o adequados em IoT?

Cite um exemplo pr√°tico de alerta autom√°tico √∫til em um ambiente com sensores.

Quais s√£o as vantagens de usar APIs como Telegram ou Google Sheets na integra√ß√£o com dispositivos IoT?

Em um sistema IoT de irriga√ß√£o, como a IA pode ajudar a economizar √°gua?

# üéØ Conclus√£o

A combina√ß√£o de IoT + IA transforma dados em decis√µes autom√°ticas.
Modelos simples de ML s√£o r√°pidos, leves e eficientes ‚Äî ideais para dispositivos com recursos limitados.
Integrar com APIs externas amplia o impacto: comunica√ß√£o, automa√ß√£o e registro em tempo real.
